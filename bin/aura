#!/usr/bin/python
from aura.core import ApplicationDeployment, ApplicationDescriptionParser
import logging
from sys import argv
import json

if __name__ == "__main__":
    if len(argv)< 3:
        print "Provide description tar and server configuration file"
        exit(0)
    description_file = argv[1]
    aura_configuration = json.load(open(argv[2]))

    logging.basicConfig(level=logging.INFO)
    parser = ApplicationDescriptionParser(description_file)
    a = ApplicationDeployment(parser.get_description(), aura_configuration)
    a.allocate_resources()
    a.run_deployment()
